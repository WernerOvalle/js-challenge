const $app=document.getElementById("app"),$observe=document.getElementById("observe"),API="https://api.escuelajs.co/api/v1/products",limitProducts=200,incrementOffset=10,defaultOffset=5;window.onbeforeunload=closeIt;const getData=async e=>{const t=await fetch(e);try{let e=(await t.json()).map(createCard);renderProducts(e)}catch(e){console.log(e)}},createCard=e=>`\n    <article class="Card">\n      <img width=640 height=480 src=${e.images[0]} />\n      <h2>\n        ${e.title}\n        <small>${e.price}</small>\n      </h2>\n    </article>\n  `,renderProducts=e=>{let t=document.createElement("section");t.classList.add("Item"),t.innerHTML=e,$app.appendChild(t)},resetStorage=()=>{localStorage.removeItem("offset")};function closeIt(){localStorage.removeItem("offset")}const loadData=async()=>{await getData(API)},intersectionObserver=new IntersectionObserver((e=>{if(getOffset()>200)return showMessage('"Todos los productos obtenidos"'),void intersectionObserver.disconnect();e[0].isIntersecting&&(getData(getURL(getOffset(),10)),setOffset(getOffset()+10))}),{rootMargin:"0px 0px 100% 0px"});intersectionObserver.observe($observe);const showMessage=e=>{window.alert(e)},getOffset=()=>{const e=localStorage.getItem("offset")||5;return Number(e)},setOffset=e=>{localStorage.setItem("offset",e)},getURL=(e,t)=>`${API}?offset=${e}&limit=${t}`;